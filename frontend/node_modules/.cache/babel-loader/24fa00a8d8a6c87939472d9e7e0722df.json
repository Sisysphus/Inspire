{"ast":null,"code":"import { fetch } from \"./csrf.js\";\nconst SET_USER = \"session/setUser\";\nconst REMOVE_USER = \"session/removeUser\";\nconst SET_NOTES = \"session/setNotes\";\n\nconst setNotes = notes => ({\n  type: SET_NOTES,\n  payload: notes\n});\n\nconst setUser = user => ({\n  type: SET_USER,\n  payload: user\n});\n\nconst removeUser = () => ({\n  type: REMOVE_USER\n});\n\nexport const login = ({\n  credential,\n  password\n}) => async dispatch => {\n  const res = await fetch(\"/api/session\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      credential,\n      password\n    })\n  });\n  console.log(res.data);\n  dispatch(setUser(res.data.user));\n  dispatch(setNotes(res.data.notes));\n  return res;\n};\nexport const restoreUser = () => async dispatch => {\n  const res = await fetch(\"/api/session\");\n  dispatch(setUser(res.data.user));\n  dispatch(setNotes(res.data.notes));\n  return res;\n};\nexport const signup = user => async dispatch => {\n  const {\n    username,\n    email,\n    password\n  } = user;\n  const response = await fetch(\"/api/users\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      username,\n      email,\n      password\n    })\n  });\n  dispatch(setUser(response.data.user));\n  return response;\n};\nexport const logout = () => async dispatch => {\n  const response = await fetch(\"/api/session\", {\n    method: \"DELETE\"\n  });\n  dispatch(removeUser());\n  return response;\n};\nconst initialState = {\n  user: null,\n  notes: null\n};\n\nfunction reducer(state = initialState, action) {\n  let newState;\n\n  switch (action.type) {\n    case SET_USER:\n      newState = Object.assign({}, state, {\n        user: action.payload\n      });\n      return newState;\n\n    case REMOVE_USER:\n      newState = Object.assign({}, state, {\n        user: null\n      });\n      return newState;\n    // case SET_NOTES:\n    //   newState = Object.assign({}, state, {\n    //     user: state.user,\n    //     notes: action.payload,\n    //   });\n    // return newState;\n\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","map":{"version":3,"sources":["/Users/adamfaidy/Documents/projects/Keeps2/google-keep/frontend/src/store/session.js"],"names":["fetch","SET_USER","REMOVE_USER","SET_NOTES","setNotes","notes","type","payload","setUser","user","removeUser","login","credential","password","dispatch","res","method","body","JSON","stringify","console","log","data","restoreUser","signup","username","email","response","logout","initialState","reducer","state","action","newState","Object","assign"],"mappings":"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","sourcesContent":["import { fetch } from \"./csrf.js\";\n\nconst SET_USER = \"session/setUser\";\nconst REMOVE_USER = \"session/removeUser\";\nconst SET_NOTES = \"session/setNotes\";\n\nconst setNotes = (notes) => ({\n  type: SET_NOTES,\n  payload: notes,\n});\n\nconst setUser = (user) => ({\n  type: SET_USER,\n  payload: user,\n});\n\nconst removeUser = () => ({\n  type: REMOVE_USER,\n});\n\nexport const login =\n  ({ credential, password }) =>\n  async (dispatch) => {\n    const res = await fetch(\"/api/session\", {\n      method: \"POST\",\n      body: JSON.stringify({ credential, password }),\n    });\n    console.log(res.data);\n    dispatch(setUser(res.data.user));\n    dispatch(setNotes(res.data.notes));\n    return res;\n  };\n\nexport const restoreUser = () => async (dispatch) => {\n  const res = await fetch(\"/api/session\");\n  dispatch(setUser(res.data.user));\n  dispatch(setNotes(res.data.notes));\n  return res;\n};\n\nexport const signup = (user) => async (dispatch) => {\n  const { username, email, password } = user;\n  const response = await fetch(\"/api/users\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      username,\n      email,\n      password,\n    }),\n  });\n\n  dispatch(setUser(response.data.user));\n  return response;\n};\n\nexport const logout = () => async (dispatch) => {\n  const response = await fetch(\"/api/session\", {\n    method: \"DELETE\",\n  });\n  dispatch(removeUser());\n  return response;\n};\n\nconst initialState = { user: null, notes: null };\n\nfunction reducer(state = initialState, action) {\n  let newState;\n  switch (action.type) {\n    case SET_USER:\n      newState = Object.assign({}, state, { user: action.payload });\n      return newState;\n    case REMOVE_USER:\n      newState = Object.assign({}, state, { user: null });\n      return newState;\n    // case SET_NOTES:\n    //   newState = Object.assign({}, state, {\n    //     user: state.user,\n    //     notes: action.payload,\n    //   });\n    // return newState;\n    default:\n      return state;\n  }\n}\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}